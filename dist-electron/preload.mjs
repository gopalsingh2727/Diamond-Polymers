"use strict";const n=require("electron"),c=["main-process-message","update-can-available","download-progress","clear-storage-and-reload"],d=["check-update","open-download-page","download-update","install-update"],t=["check-update","open-download-page","download-update","install-update"];try{n.contextBridge.exposeInMainWorld("ipcRenderer",{on:(e,o)=>{if(!c.includes(e)){console.warn(`Blocked IPC receive on unauthorized channel: ${e}`);return}try{n.ipcRenderer.on(e,o)}catch(r){console.error("ipcRenderer.on error:",r)}},off:(e,o)=>{if(c.includes(e))try{n.ipcRenderer.off(e,o)}catch(r){console.error("ipcRenderer.off error:",r)}},send:(e,...o)=>{if(!d.includes(e)){console.warn(`Blocked IPC send on unauthorized channel: ${e}`);return}try{n.ipcRenderer.send(e,...o)}catch(r){console.error("ipcRenderer.send error:",r)}},invoke:(e,...o)=>{if(!t.includes(e))return console.warn(`Blocked IPC invoke on unauthorized channel: ${e}`),Promise.reject(new Error(`Unauthorized channel: ${e}`));try{return n.ipcRenderer.invoke(e,...o)}catch(r){return console.error("ipcRenderer.invoke error:",r),Promise.reject(r)}},once:(e,o)=>{if(!c.includes(e)){console.warn(`Blocked IPC once on unauthorized channel: ${e}`);return}try{n.ipcRenderer.once(e,o)}catch(r){console.error("ipcRenderer.once error:",r)}}})}catch(e){console.error("contextBridge expose error:",e)}process.on("uncaughtException",e=>{console.error("Uncaught Exception in preload:",e)});
